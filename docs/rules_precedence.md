# 规则分层与冲突处理协议（v0.2）

## 1) 分层
- 全局宪法（所有端必须遵守）：
  - 安全/合规/数据不丢
  - 向后兼容与线上稳定
  - API 契约一致性
  - 可灰度、可回滚、可观测

- 领域法（只在各自范围内生效）：
  - FE：组件/状态管理/设计系统/性能预算
  - BE：分层/错误码/日志/幂等/迁移套路
  - Mobile：离线/弱网/同步/包体/性能

## 2) 常见冲突与结论
- 字段重命名 vs 兼容性：
  - 结论：禁止重命名；新增字段 + 双读/双写 + 废弃周期
- "一次返回更多" vs 性能/成本：
  - 结论：按性能预算与契约；必要时分页/增量；提供指标对比
- 顺手大重构 vs 风险与交付：
  - 结论：拆分多 MR，小步灰度，禁止混入业务 MR

## 3) 裁决机制
- 契约/跨端：API Owner + BE/FE/Mobile Gatekeeper 共同裁决
- 领域内部：该领域 Gatekeeper 裁决
- 安全/兼容：任何人可阻断合并
