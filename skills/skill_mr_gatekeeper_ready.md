# Skill：Gatekeeper-Ready MR（v0.2）

目标：让"唯一后端 Gatekeeper"在 1~3 分钟内看 MR 描述就能判断是否进入代码级 review。
本 skill 强制产出：Change Inventory + 兼容/数据/幂等/灰度回滚/可观测/测试证据。

---

## 1) 什么时候必须用这个 skill
- 默认所有 MR 都应该用
- 尤其是：L1+、任何涉及接口/数据/MQ/SSE/配置/依赖/权限的改动

---

## 2) 必须产出（复制到 MR 描述）
严格按 CLAUDE.md 的 MR 描述契约 v0.2 输出【MR Description】。
缺任何关键项（1/2/3/4/6/8）：不要提交 MR。

---

## 3) Gatekeeper 最在意的"必答雷点清单"（写进 MR Description）
### A) 向后兼容/契约稳定
- 是否有字段删除/重命名（默认不允许）
- 新增字段是否可选 + 默认值策略
- 枚举/状态未知值兜底策略
- 回滚后旧版本读新数据是否不崩

### B) 数据变更三段式
- 兼容读写是否已上线
- 回填是否幂等、可断点、可暂停、失败记录在哪里
- 索引是否对齐真实查询模式（一句话）

### C) 幂等与重试（涉及 MQ/异步/重复请求必须写）
- 幂等 key 是什么
- 重试是否产生重复副作用
- 乱序会怎样
- 失败补偿/修复怎么做

### D) 灰度与回滚（L2+ 必须）
- 开关名 + 默认值必须安全
- 灰度维度
- 回滚条件阈值 + 回滚步骤可执行

### E) 可观测
- 关键日志字段
- 指标/告警建议（至少写清"上线后盯什么，什么情况回滚"）

### F) 测试证据
- 命令 + 结果，至少包含 1 条兼容性测试
