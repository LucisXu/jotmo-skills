# Skill：向后兼容（v0.2）

## 核心原则
- 只增不删：字段/枚举/接口默认只能新增；删除与重命名走废弃流程（>=2个版本）
- 服务端永远容忍旧客户端：缺字段、旧枚举、旧状态必须可运行（默认值/降级）
- DB 变更三段式：先兼容读写 → 回填 → 再收紧约束（能不收紧就不收紧）

## 字段/枚举策略
- 新增字段：读取兜底默认值；写入必要可双写
- 废弃字段：保留兼容读写，标记 deprecated，统计命中率后再移除
- 枚举扩展：未知值必须映射到 Default/Unknown；前端兜底展示

## 必测清单（至少 1 条要写进 MR 的 Test Evidence）
- 旧客户端缺字段请求是否正常
- 老数据字段为空/缺失是否正常
- 回滚后旧版本服务是否仍能读新数据（至少不崩）
- feature flag 开/关两条链路都通
